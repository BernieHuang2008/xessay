# 作文训练系统

一个基于HTML5的交互式作文训练平台，提供审题训练、仿写训练等多种学习模式。

## 项目结构

```
xessay/
├── frontend/html/          # 前端HTML页面
│   ├── index.html         # 主导航页面
│   ├── essay-analysis.html # 审题训练页面
│   ├── imitation.html     # 仿写训练页面
│   ├── practice.html      # 综合练习页面
│   ├── review.html        # 学习回顾页面
│   ├── drawing-canvas.js  # 绘图组件
│   └── base_url.js        # 基础配置
├── backend/               # 后端API文档
│   └── api.md            # API接口说明
└── README.md             # 项目说明
```

## 页面功能介绍

### 1. 主导航页面 (index.html)

**功能描述：**
- 作为系统入口，展示4个主要训练模块
- 获取并显示用户session信息
- 提供美观的卡片式导航界面

**主要特性：**
- 响应式设计，支持移动端访问
- 渐变背景和毛玻璃效果的现代化UI
- Session信息实时获取和显示
- 卡片悬浮动画效果

**使用方法：**
访问 `index.html?sessionid=YOUR_SESSION_ID`

### 2. 审题训练页面 (essay-analysis.html)

**功能描述：**
专门用于提升学生审题能力的训练页面，通过手写分析来深入理解题目要求。

**主要特性：**
- **题目展示区：** 
  - 支持Markdown格式的题目内容渲染
  - 自动从后端获取题目内容
  - 美观的排版和阅读体验

- **手写分析区：**
  - 基于Canvas的绘图功能
  - 支持鼠标和触摸操作
  - 丰富的绘图工具（画笔、橡皮擦等）

- **绘图工具栏：**
  - ✏️ 画笔：可调节粗细，支持流畅书写
  - 🧹 橡皮擦：可调节大小，精确擦除
  - ↶ 撤销：支持最多20步撤销操作
  - ⬇️ 翻页：智能扩展画布高度
  - 🗑️ 清空：一键清空画布内容

- **提交功能：**
  - 将手写内容转换为PNG/JPG图片
  - 自动上传至后端服务器
  - 提交状态反馈和成功提示

**使用方法：**
1. 访问 `essay-analysis.html?sessionid=YOUR_SESSION_ID`
2. 阅读题目内容，进行审题分析
3. 在绘图区域手写分析内容
4. 点击"提交审题分析"按钮完成提交

### 3. 仿写训练页面 (imitation.html)

**功能描述：**
通过模仿优秀范文来提升写作技巧，支持多语段仿写和历史作品查看。

**主要特性：**
- **原文展示区：**
  - 支持多个仿写语段的切换
  - Markdown格式渲染，保持良好阅读体验
  - 语段选择按钮，便于快速切换

- **模式切换：**
  - **新建仿写模式：** 提供绘图区域进行创作
  - **历史查看模式：** 浏览之前的仿写作品

- **语段管理：**
  - 动态生成语段选择按钮
  - 支持任意数量的仿写语段
  - 每个语段独立的仿写历史

- **历史作品查看：**
  - 图片浏览器功能
  - 上一份/下一份导航
  - 作品数量统计显示

- **绘图功能：**
  - 复用drawing-canvas组件
  - 完整的绘图工具支持
  - 图片格式提交

**使用方法：**
1. 访问 `imitation.html?sessionid=YOUR_SESSION_ID`
2. 选择要仿写的语段
3. 选择"新建仿写"或"查看历史"模式
4. 在新建模式下进行仿写创作
5. 提交仿写作品

### 4. 综合练习页面 (practice.html)

**功能描述：**
开发中的综合练习模块，将提供完整的作文练习体验。

**计划功能：**
- 📝 完整作文写作练习
- 📊 智能评分与建议
- 📈 写作能力评估
- 📚 个性化练习推荐
- 🏆 学习成就系统

### 5. 学习回顾页面 (review.html)

**功能描述：**
开发中的学习回顾模块，用于追踪学习进度和分析能力提升。

**计划功能：**
- 📈 学习进度追踪
- 📝 历史作业查看
- 📊 能力提升分析
- 🎯 学习目标设定
- 📅 学习日历记录
- 🏅 成就徽章展示
- 📑 学习报告生成

## 核心组件

### DrawingCanvas 绘图组件 (drawing-canvas.js)

**功能特性：**
- **多点触控支持：** 同时支持鼠标和触摸操作
- **工具切换：** 画笔和橡皮擦模式
- **撤销重做：** 最多支持20步撤销操作
- **动态画布：** 支持画布大小动态调整
- **图片导出：** 支持PNG/JPG格式导出
- **响应式设计：** 自适应不同屏幕尺寸

**API接口：**
```javascript
// 创建绘图组件
const canvas = new DrawingCanvas('containerId', {
    backgroundColor: '#ffffff',
    penColor: '#000000',
    penSize: 2,
    eraserSize: 10,
    maxUndoSteps: 20
});

// 导出图片
canvas.toBlob(callback, 'image/png', 0.8);
canvas.toDataURL('image/png', 0.8);
```

## 技术特性

### 前端技术
- **HTML5 Canvas：** 高性能绘图渲染
- **CSS3：** 现代化样式和动画效果
- **Vanilla JavaScript：** 轻量级，无框架依赖
- **Marked.js：** Markdown内容渲染
- **响应式设计：** 移动端友好

### 设计特点
- **现代化UI：** 渐变背景、毛玻璃效果、卡片设计
- **交互友好：** 悬浮动画、状态反馈、加载提示
- **无障碍支持：** 语义化标签、键盘导航支持
- **性能优化：** 图片压缩、懒加载、事件节流

## 后端接口

详细的API接口文档请参考 `backend/api.md` 文件。

### 主要接口：
- `GET /getSessionDetail` - 获取session信息
- `GET /getEssayTopic` - 获取审题训练题目
- `POST /submitEssayOutline` - 提交审题分析
- `GET /getImitation` - 获取仿写材料
- `POST /submitImitation` - 提交仿写作品

## 部署说明

### 环境要求
- 现代浏览器（支持HTML5 Canvas和ES6）
- Web服务器（用于托管静态文件）
- 后端服务（提供API接口支持）

### 配置步骤
1. 修改 `base_url.js` 中的 `BASE_URL` 配置
2. 部署HTML文件到Web服务器
3. 确保后端API服务正常运行
4. 访问 `index.html?sessionid=test` 进行测试

## 浏览器兼容性

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+
- ⚠️ IE 11（部分功能受限）

## 开发计划

### 近期目标
- [ ] 完善综合练习模块
- [ ] 添加学习回顾功能
- [ ] 优化移动端体验
- [ ] 添加键盘快捷键支持

### 长期规划
- [ ] AI智能评分系统
- [ ] 多媒体内容支持
- [ ] 协作学习功能
- [ ] 离线模式支持

## 许可证

本项目采用 MIT 许可证，详情请参考 LICENSE 文件。

